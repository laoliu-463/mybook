---
title: 子网划分
type: concept
domain: [计算机网络]
tags: [子网, IP地址, CIDR, 子网掩码, 面试八股]
source: notebooklm
created: 2026-02-08
status: draft
notebooklm: https://notebooklm.google.com/notebook/7718030c-b3ce-4c8e-8027-f73083b975cf
---

## TL;DR

- 子网划分用于高效利用 IP 地址、隔离广播域
- 子网掩码区分网络位和主机位
- CIDR（/24）替代传统分类法，更灵活
- 可用主机数 = 2^n - 2（减去网络地址和广播地址）

---

## IP 地址结构

### IPv4 地址组成

```
192.168.1.100
└─┬─┘ └┬┘ └┬┘
  │    │   └── 主机号
  │    └────── 子网号（可选）
  └─────────── 网络号
```

- 32 位二进制，点分十进制表示
- 分为网络部分 + 主机部分

### 传统分类（A/B/C 类）

| 类别 | 首位 | 网络位 | 默认掩码 | 地址范围 |
|------|------|--------|----------|----------|
| A 类 | 0 | 8 位 | /8 | 1.0.0.0 - 126.x.x.x |
| B 类 | 10 | 16 位 | /16 | 128.0.0.0 - 191.x.x.x |
| C 类 | 110 | 24 位 | /24 | 192.0.0.0 - 223.x.x.x |

^[23]

---

## 子网掩码

### 作用

区分 IP 地址中的网络位和主机位：
- 掩码中的 `1` → 网络位
- 掩码中的 `0` → 主机位

### 计算网络地址

```
IP 地址:     192.168.1.100  = 11000000.10101000.00000001.01100100
子网掩码:    255.255.255.0  = 11111111.11111111.11111111.00000000
────────────────────────────────────────────────────────────────
AND 运算:   192.168.1.0    = 11000000.10101000.00000001.00000000
                              └────────── 网络地址 ──────────┘
```

^[24,25]

---

## CIDR 记法

### 替代分类法

```
传统写法:  192.168.1.0  掩码 255.255.255.0
CIDR写法:  192.168.1.0/24
                       └── 网络位数量
```

### 常用 CIDR 对照表

| CIDR | 子网掩码 | 可用主机数 |
|------|----------|------------|
| /24 | 255.255.255.0 | 254 |
| /25 | 255.255.255.128 | 126 |
| /26 | 255.255.255.192 | 62 |
| /27 | 255.255.255.224 | 30 |
| /28 | 255.255.255.240 | 14 |
| /29 | 255.255.255.248 | 6 |
| /30 | 255.255.255.252 | 2 |

^[24]

---

## 主机数计算公式

$$可用主机数 = 2^n - 2$$

- n = 主机位数量（32 - 网络位）
- 减 2：网络地址（全0）+ 广播地址（全1）

### 计算示例

**问：192.168.1.0/25 可以容纳多少主机？**

```
/25 掩码 = 255.255.255.128
最后一段二进制: 10000000
主机位: 7 位
可用主机数 = 2^7 - 2 = 126 个
```

^[24,26]

---

## 子网划分实战

### 需求：将 192.168.1.0/24 划分为 4 个子网

**步骤 1**：确定借位数
- 需要 4 个子网 → 借 2 位（2² = 4）

**步骤 2**：计算新掩码
- 原掩码 /24，借 2 位 → /26
- 新掩码：255.255.255.192

**步骤 3**：划分结果

| 子网 | 网络地址 | 可用范围 | 广播地址 |
|------|----------|----------|----------|
| 1 | 192.168.1.0 | .1 - .62 | .63 |
| 2 | 192.168.1.64 | .65 - .126 | .127 |
| 3 | 192.168.1.128 | .129 - .190 | .191 |
| 4 | 192.168.1.192 | .193 - .254 | .255 |

每个子网可用主机：62 个

---

## 特殊地址

| 地址类型 | 示例 | 说明 |
|----------|------|------|
| 网络地址 | 192.168.1.0 | 主机位全 0 |
| 广播地址 | 192.168.1.255 | 主机位全 1 |
| 回环地址 | 127.0.0.1 | 本机测试 |
| 私有地址 | 10.x.x.x, 172.16-31.x.x, 192.168.x.x | 内网使用 |

---

## 面试追问

**Q: 为什么可用主机要减 2？**

> 网络地址（主机位全0）用于标识网络本身，广播地址（主机位全1）用于向该网络所有主机广播，都不能分配给主机。

**Q: /31 和 /32 有什么用？**

> /31（2个地址）用于点对点链路，两端各一个；/32（1个地址）用于标识单个主机路由。

---

## 知识网络

- [[00-overview|网络基础总览]]
- [[01-TCP-IP协议栈]]
- [[03-传输媒介]]

## References

^[23] IP 地址分类
^[24-26] 子网划分 (爱快iKuai)
