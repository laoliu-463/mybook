{
  "nodes": [
    {
      "id": "group-db-user",
      "type": "group",
      "x": -800,
      "y": -400,
      "width": 520,
      "height": 480,
      "label": "ç”¨æˆ·æ¨¡å— (Database)",
      "color": "5"
    },
    {
      "id": "group-db-shop",
      "type": "group",
      "x": -800,
      "y": 120,
      "width": 520,
      "height": 380,
      "label": "å•†é“ºæ¨¡å— (Database)",
      "color": "4"
    },
    {
      "id": "group-db-voucher",
      "type": "group",
      "x": -800,
      "y": 540,
      "width": 520,
      "height": 480,
      "label": "ä¼˜æƒ åˆ¸æ¨¡å— (Database)",
      "color": "2"
    },
    {
      "id": "group-db-social",
      "type": "group",
      "x": -220,
      "y": -400,
      "width": 420,
      "height": 680,
      "label": "ç¤¾äº¤æ¨¡å— (Database)",
      "color": "6"
    },
    {
      "id": "group-redis-auth",
      "type": "group",
      "x": 260,
      "y": -400,
      "width": 380,
      "height": 280,
      "label": "ç™»å½•è®¤è¯å±‚ (Redis)",
      "color": "5"
    },
    {
      "id": "group-redis-cache",
      "type": "group",
      "x": 260,
      "y": -80,
      "width": 380,
      "height": 380,
      "label": "ç¼“å­˜å±‚ (Redis)",
      "color": "4"
    },
    {
      "id": "group-redis-seckill",
      "type": "group",
      "x": 260,
      "y": 340,
      "width": 380,
      "height": 280,
      "label": "ç§’æ€å±‚ (Redis)",
      "color": "2"
    },
    {
      "id": "group-redis-social",
      "type": "group",
      "x": 260,
      "y": 660,
      "width": 380,
      "height": 480,
      "label": "ç¤¾äº¤å±‚ (Redis)",
      "color": "6"
    },
    {
      "id": "node-tb-user",
      "type": "text",
      "x": -760,
      "y": -360,
      "width": 220,
      "height": 180,
      "text": "### tb_user\n**ç”¨æˆ·è¡¨**\n\n- id (PK)\n- phone (UK)\n- password\n- nick_name\n- icon",
      "color": "5"
    },
    {
      "id": "node-tb-user-info",
      "type": "text",
      "x": -500,
      "y": -360,
      "width": 200,
      "height": 180,
      "text": "### tb_user_info\n**ç”¨æˆ·è¯¦æƒ…**\n\n- user_id (PK,FK)\n- fans\n- followee\n- credits",
      "color": "5"
    },
    {
      "id": "node-tb-sign",
      "type": "text",
      "x": -760,
      "y": -140,
      "width": 200,
      "height": 140,
      "text": "### tb_sign\n**ç­¾åˆ°è¡¨**\n\n- id (PK)\n- user_id (FK)\n- year\n- date",
      "color": "5"
    },
    {
      "id": "node-tb-shop",
      "type": "text",
      "x": -760,
      "y": 160,
      "width": 220,
      "height": 200,
      "text": "### tb_shop\n**å•†é“ºè¡¨**\n\n- id (PK)\n- name\n- type_id (FK)\n- x, y (åæ ‡)\n- avg_price\n- score",
      "color": "4"
    },
    {
      "id": "node-tb-shop-type",
      "type": "text",
      "x": -500,
      "y": 160,
      "width": 200,
      "height": 160,
      "text": "### tb_shop_type\n**å•†é“ºç±»å‹**\n\n- id (PK)\n- name\n- icon\n- sort",
      "color": "4"
    },
    {
      "id": "node-tb-voucher",
      "type": "text",
      "x": -760,
      "y": 580,
      "width": 220,
      "height": 200,
      "text": "### tb_voucher\n**ä¼˜æƒ åˆ¸è¡¨**\n\n- id (PK)\n- shop_id (FK)\n- pay_value\n- actual_value\n- type",
      "color": "2"
    },
    {
      "id": "node-tb-seckill-voucher",
      "type": "text",
      "x": -500,
      "y": 580,
      "width": 200,
      "height": 200,
      "text": "### tb_seckill_voucher\n**ç§’æ€åˆ¸**\n\n- voucher_id (PK,FK)\n- stock ğŸ”¥\n- begin_time\n- end_time",
      "color": "2"
    },
    {
      "id": "node-tb-voucher-order",
      "type": "text",
      "x": -760,
      "y": 820,
      "width": 220,
      "height": 160,
      "text": "### tb_voucher_order\n**åˆ¸è®¢å•**\n\n- id (PK)\n- user_id (FK)\n- voucher_id (FK)\n- pay_type",
      "color": "2"
    },
    {
      "id": "node-tb-blog",
      "type": "text",
      "x": -180,
      "y": -360,
      "width": 200,
      "height": 200,
      "text": "### tb_blog\n**æ¢åº—ç¬”è®°**\n\n- id (PK)\n- shop_id (FK)\n- user_id (FK)\n- title\n- images\n- liked",
      "color": "6"
    },
    {
      "id": "node-tb-blog-comments",
      "type": "text",
      "x": -180,
      "y": -120,
      "width": 200,
      "height": 160,
      "text": "### tb_blog_comments\n**ç¬”è®°è¯„è®º**\n\n- id (PK)\n- blog_id (FK)\n- user_id (FK)\n- content",
      "color": "6"
    },
    {
      "id": "node-tb-follow",
      "type": "text",
      "x": -180,
      "y": 80,
      "width": 200,
      "height": 160,
      "text": "### tb_follow\n**å…³æ³¨è¡¨**\n\n- id (PK)\n- user_id (FK)\n- follow_user_id (FK)\n- create_time",
      "color": "6"
    },
    {
      "id": "node-redis-code",
      "type": "text",
      "x": 300,
      "y": -360,
      "width": 300,
      "height": 100,
      "text": "### login:code:{phone}\n**éªŒè¯ç ç¼“å­˜**\n\n`String` | TTL: 5min",
      "color": "5"
    },
    {
      "id": "node-redis-token",
      "type": "text",
      "x": 300,
      "y": -220,
      "width": 300,
      "height": 100,
      "text": "### login:token:{token}\n**ç”¨æˆ·Token**\n\n`Hash` | TTL: 30min (æ»‘åŠ¨åˆ·æ–°)",
      "color": "5"
    },
    {
      "id": "node-redis-shop",
      "type": "text",
      "x": 300,
      "y": -40,
      "width": 300,
      "height": 120,
      "text": "### cache:shop:{id}\n**å•†é“ºç¼“å­˜**\n\n`String` (JSON)\nğŸ›¡ï¸ ç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©",
      "color": "4"
    },
    {
      "id": "node-redis-shop-type",
      "type": "text",
      "x": 300,
      "y": 120,
      "width": 300,
      "height": 80,
      "text": "### cache:shop-type\n**å•†é“ºç±»å‹åˆ—è¡¨**\n\n`String` (JSON Array)",
      "color": "4"
    },
    {
      "id": "node-redis-geo",
      "type": "text",
      "x": 300,
      "y": 240,
      "width": 300,
      "height": 80,
      "text": "### shop:geo:{typeId}\n**é™„è¿‘å•†é“º**\n\n`GEO` (ç»çº¬åº¦ç´¢å¼•)",
      "color": "4"
    },
    {
      "id": "node-redis-stock",
      "type": "text",
      "x": 300,
      "y": 380,
      "width": 300,
      "height": 100,
      "text": "### seckill:stock:{voucherId}\n**ç§’æ€åº“å­˜**\n\n`String` | åŸå­æ‰£å‡ (DECR)",
      "color": "2"
    },
    {
      "id": "node-redis-order-set",
      "type": "text",
      "x": 300,
      "y": 520,
      "width": 300,
      "height": 100,
      "text": "### seckill:order:{voucherId}\n**ä¸€äººä¸€å•**\n\n`Set` (userIdå»é‡) + Redissonåˆ†å¸ƒå¼é”",
      "color": "2"
    },
    {
      "id": "node-redis-liked",
      "type": "text",
      "x": 300,
      "y": 700,
      "width": 300,
      "height": 100,
      "text": "### blog:liked:{blogId}\n**ç‚¹èµè®°å½•**\n\n`ZSet` (score=timestamp)",
      "color": "6"
    },
    {
      "id": "node-redis-follows",
      "type": "text",
      "x": 300,
      "y": 840,
      "width": 300,
      "height": 100,
      "text": "### follows:{userId}\n**å…³æ³¨åˆ—è¡¨**\n\n`Set` | å…±åŒå…³æ³¨: SINTER",
      "color": "6"
    },
    {
      "id": "node-redis-feed",
      "type": "text",
      "x": 300,
      "y": 980,
      "width": 300,
      "height": 100,
      "text": "### feed:{userId}\n**Feedæµæ”¶ä»¶ç®±**\n\n`ZSet` (score=timestamp) | æ¨æ¨¡å¼",
      "color": "6"
    },
    {
      "id": "node-redis-sign",
      "type": "text",
      "x": 300,
      "y": 1120,
      "width": 300,
      "height": 100,
      "text": "### sign:{userId}:{yyyyMM}\n**ç­¾åˆ°BitMap**\n\n`BitMap` (æŒ‰å¤©bitä½)",
      "color": "5"
    }
  ],
  "edges": [
    {
      "id": "edge-user-userinfo",
      "fromNode": "node-tb-user",
      "fromSide": "right",
      "toNode": "node-tb-user-info",
      "toSide": "left",
      "label": "1:1"
    },
    {
      "id": "edge-user-sign",
      "fromNode": "node-tb-user",
      "fromSide": "bottom",
      "toNode": "node-tb-sign",
      "toSide": "top",
      "label": "1:N"
    },
    {
      "id": "edge-user-blog",
      "fromNode": "node-tb-user",
      "fromSide": "right",
      "toNode": "node-tb-blog",
      "toSide": "left",
      "label": "å‘å¸ƒ"
    },
    {
      "id": "edge-user-follow",
      "fromNode": "node-tb-user",
      "fromSide": "right",
      "toNode": "node-tb-follow",
      "toSide": "left",
      "label": "å…³æ³¨"
    },
    {
      "id": "edge-user-order",
      "fromNode": "node-tb-user",
      "fromSide": "bottom",
      "toNode": "node-tb-voucher-order",
      "toSide": "top",
      "label": "ä¸‹å•"
    },
    {
      "id": "edge-shop-type",
      "fromNode": "node-tb-shop",
      "fromSide": "right",
      "toNode": "node-tb-shop-type",
      "toSide": "left",
      "label": "å±äº"
    },
    {
      "id": "edge-shop-blog",
      "fromNode": "node-tb-shop",
      "fromSide": "right",
      "toNode": "node-tb-blog",
      "toSide": "bottom",
      "label": "è¢«æ¢åº—"
    },
    {
      "id": "edge-shop-voucher",
      "fromNode": "node-tb-shop",
      "fromSide": "bottom",
      "toNode": "node-tb-voucher",
      "toSide": "top",
      "label": "å‘æ”¾"
    },
    {
      "id": "edge-voucher-seckill",
      "fromNode": "node-tb-voucher",
      "fromSide": "right",
      "toNode": "node-tb-seckill-voucher",
      "toSide": "left",
      "label": "1:1ç§’æ€"
    },
    {
      "id": "edge-voucher-order",
      "fromNode": "node-tb-voucher",
      "fromSide": "bottom",
      "toNode": "node-tb-voucher-order",
      "toSide": "top",
      "label": "è¢«è´­ä¹°"
    },
    {
      "id": "edge-blog-comment",
      "fromNode": "node-tb-blog",
      "fromSide": "bottom",
      "toNode": "node-tb-blog-comments",
      "toSide": "top",
      "label": "è¯„è®º"
    },
    {
      "id": "edge-user-redis-code",
      "fromNode": "node-tb-user",
      "fromSide": "right",
      "toNode": "node-redis-code",
      "toSide": "left",
      "label": "éªŒè¯ç ",
      "color": "5"
    },
    {
      "id": "edge-user-redis-token",
      "fromNode": "node-tb-user",
      "fromSide": "right",
      "toNode": "node-redis-token",
      "toSide": "left",
      "label": "ä¼šè¯",
      "color": "5"
    },
    {
      "id": "edge-shop-redis-cache",
      "fromNode": "node-tb-shop",
      "fromSide": "right",
      "toNode": "node-redis-shop",
      "toSide": "left",
      "label": "ç¼“å­˜",
      "color": "4"
    },
    {
      "id": "edge-shoptype-redis-cache",
      "fromNode": "node-tb-shop-type",
      "fromSide": "right",
      "toNode": "node-redis-shop-type",
      "toSide": "left",
      "label": "åˆ—è¡¨ç¼“å­˜",
      "color": "4"
    },
    {
      "id": "edge-shop-redis-geo",
      "fromNode": "node-tb-shop",
      "fromSide": "right",
      "toNode": "node-redis-geo",
      "toSide": "left",
      "label": "GEOç´¢å¼•",
      "color": "4"
    },
    {
      "id": "edge-seckill-redis-stock",
      "fromNode": "node-tb-seckill-voucher",
      "fromSide": "right",
      "toNode": "node-redis-stock",
      "toSide": "left",
      "label": "åº“å­˜é¢„çƒ­",
      "color": "2"
    },
    {
      "id": "edge-order-redis-set",
      "fromNode": "node-tb-voucher-order",
      "fromSide": "right",
      "toNode": "node-redis-order-set",
      "toSide": "left",
      "label": "å»é‡",
      "color": "2"
    },
    {
      "id": "edge-blog-redis-liked",
      "fromNode": "node-tb-blog",
      "fromSide": "right",
      "toNode": "node-redis-liked",
      "toSide": "left",
      "label": "ç‚¹èµ",
      "color": "6"
    },
    {
      "id": "edge-follow-redis-follows",
      "fromNode": "node-tb-follow",
      "fromSide": "right",
      "toNode": "node-redis-follows",
      "toSide": "left",
      "label": "é›†åˆ",
      "color": "6"
    },
    {
      "id": "edge-blog-redis-feed",
      "fromNode": "node-tb-blog",
      "fromSide": "right",
      "toNode": "node-redis-feed",
      "toSide": "left",
      "label": "æ¨é€",
      "color": "6"
    },
    {
      "id": "edge-sign-redis-bitmap",
      "fromNode": "node-tb-sign",
      "fromSide": "right",
      "toNode": "node-redis-sign",
      "toSide": "left",
      "label": "BitMap",
      "color": "5"
    }
  ]
}
