{
	"nodes":[
		{"id":"center","type":"text","x":500,"y":400,"width":340,"height":160,"text":"# ç§’æ€ç³»ç»Ÿå…­æ­¥è¿›åŒ–\n\n**ç›®æ ‡**: ä»å•æœºåˆ°åˆ†å¸ƒå¼\n**æ ¸å¿ƒ**: å¹¶å‘å®‰å…¨ + æ€§èƒ½ä¼˜åŒ–\n**æœ€ç»ˆæ–¹æ¡ˆ**: Redissonåˆ†å¸ƒå¼é”","color":"5"},
		{"id":"group-v1-v2","type":"group","x":0,"y":0,"width":380,"height":300,"label":"V1-V2ï¼šåŸºç¡€ç‰ˆæœ¬","color":"1"},
		{"id":"node-v1","type":"text","x":20,"y":50,"width":340,"height":100,"text":"### V1: ç›´æ¥æ“ä½œæ•°æ®åº“\n\nâŒ **é—®é¢˜**:\n- è¶…å–ï¼ˆåº“å­˜æ‰£æˆè´Ÿæ•°ï¼‰\n- é‡å¤è´­ä¹°ï¼ˆæ— æ ¡éªŒï¼‰","color":"1"},
		{"id":"node-v2","type":"text","x":20,"y":180,"width":340,"height":100,"text":"### V2: ä¸€äººä¸€å•æ£€æŸ¥\n\nâœ… é˜²æ­¢ç”¨æˆ·å¤šä¹°\nâŒ å¹¶å‘ä¸‹æ£€æŸ¥å¤±æ•ˆï¼ˆSELECTâ†’INSERTé—´éš™ï¼‰","color":"3"},
		{"id":"group-v3","type":"group","x":420,"y":0,"width":380,"height":300,"label":"V3ï¼šå•æœºé”","color":"3"},
		{"id":"node-v3","type":"text","x":440,"y":50,"width":340,"height":220,"text":"### V3: synchronized é”\n\n```java\nsynchronized (userId.toString().intern()) {\n  // ä¸€äººä¸€å•æ£€æŸ¥ + åˆ›å»ºè®¢å•\n}\n```\n\nâœ… å•æœºå¹¶å‘å®‰å…¨\nâŒ é›†ç¾¤ç¯å¢ƒå¤±æ•ˆï¼ˆJVMçº§åˆ«é”ï¼‰","color":"3"},
		{"id":"group-v4-v5","type":"group","x":840,"y":0,"width":460,"height":300,"label":"V4-V5ï¼šåˆ†å¸ƒå¼ä¼˜åŒ–","color":"4"},
		{"id":"node-v4","type":"text","x":860,"y":50,"width":200,"height":120,"text":"### V4: Luaè„šæœ¬\n\n**åŸå­æ€§é¢„æ£€**:\n- åˆ¤æ–­åº“å­˜\n- åˆ¤æ–­é‡å¤\n- æ‰£åº“å­˜\n- è®°å½•userId","color":"4"},
		{"id":"node-v5","type":"text","x":1080,"y":50,"width":200,"height":120,"text":"### V5: BlockingQueue\n\n**å¼‚æ­¥è§£è€¦**:\n- å¿«é€Ÿè¿”å›\n- å‰Šå³°å¡«è°·\n- åå°å…¥åº“","color":"4"},
		{"id":"node-v4-code","type":"text","x":860,"y":190,"width":420,"height":100,"text":"**æŠ€æœ¯æ ˆ**: Redis Lua + JDK BlockingQueue\nâœ… å‡å°‘DBå‹åŠ› + æå‡ååé‡\nâŒ å•æœºé˜Ÿåˆ—ä¸å¯é ï¼ˆJVMå´©æºƒä¸¢æ¶ˆæ¯ï¼‰"},
		{"id":"group-v6","type":"group","x":420,"y":340,"width":480,"height":380,"label":"V6ï¼šæœ€ç»ˆæ–¹æ¡ˆï¼ˆç”Ÿäº§çº§ï¼‰","color":"6"},
		{"id":"node-v6-title","type":"text","x":440,"y":390,"width":440,"height":80,"text":"### V6: Redisson åˆ†å¸ƒå¼é”\n\n**ç›®æ ‡**: é›†ç¾¤ç¯å¢ƒä¸‹çš„æœ€ç»ˆä¸€è‡´æ€§","color":"6"},
		{"id":"node-v6-features","type":"text","x":440,"y":490,"width":200,"height":200,"text":"**æ ¸å¿ƒç‰¹æ€§**:\n\n1. åˆ†å¸ƒå¼é”ï¼ˆåŸºäºRedisï¼‰\n2. WatchDogè‡ªåŠ¨ç»­æœŸ\n3. å¯é‡å…¥é”\n4. ä¸»ä»ä¸€è‡´æ€§å“¨å…µ\n5. çº¢é”ï¼ˆRedLockï¼‰","color":"6"},
		{"id":"node-v6-code","type":"text","x":660,"y":490,"width":220,"height":200,"text":"```java\nRLock lock = redisson\n  .getLock(\"lock:order:\"\n   + userId + \":\" \n   + voucherId);\ntry {\n  lock.lock();\n  // åˆ›å»ºè®¢å•\n} finally {\n  lock.unlock();\n}\n```","color":"6"},
		{"id":"node-pitfalls","type":"text","x":0,"y":340,"width":380,"height":260,"text":"# âš ï¸ æ˜“é”™ç‚¹æ€»ç»“\n\n1. **V2**: æ£€æŸ¥å’Œæ’å…¥é—´éš™å¯¼è‡´é‡å¤\n2. **V3**: synchronized é›†ç¾¤å¤±æ•ˆ\n3. **V4**: Luaåä»éœ€å¼‚æ­¥å¤„ç†\n4. **V6**: é”ç²’åº¦è¿‡å¤§å½±å“æ€§èƒ½\n\nğŸ’¡ **æœ€ä½³å®è·µ**: é” `userId:voucherId`","color":"1"},
		{"id":"node-evolution","type":"text","x":950,"y":340,"width":350,"height":260,"text":"# ğŸ“ˆ è¿›åŒ–è·¯å¾„\n\n**è£¸å¥”** â†’ **ä¸šåŠ¡æ ¡éªŒ** â†’ **å•æœºé”**\nâ†“\n**åŸå­é¢„æ£€** â†’ **å¼‚æ­¥é˜Ÿåˆ—**\nâ†“\n**åˆ†å¸ƒå¼é”ï¼ˆæœ€ç»ˆæ–¹æ¡ˆï¼‰**\n\n---\n\n**é€‚ç”¨åœºæ™¯**:\n- V3: å•ä½“åº”ç”¨\n- V6: å¾®æœåŠ¡é›†ç¾¤","color":"2"}
	],
	"edges":[
		{"id":"e1","fromNode":"node-v1","toNode":"node-v2","fromSide":"bottom","toSide":"top","label":"æ·»åŠ æ ¡éªŒ"},
		{"id":"e2","fromNode":"group-v1-v2","toNode":"group-v3","fromSide":"right","toSide":"left","label":"å¹¶å‘é—®é¢˜"},
		{"id":"e3","fromNode":"group-v3","toNode":"group-v4-v5","fromSide":"right","toSide":"left","label":"åˆ†å¸ƒå¼æ¼”è¿›"},
		{"id":"e4","fromNode":"node-v4","toNode":"node-v5","fromSide":"right","toSide":"left","label":"ä¸²è”"},
		{"id":"e5","fromNode":"group-v4-v5","toNode":"group-v6","fromSide":"bottom","toSide":"top","label":"æœ€ç»ˆæ–¹æ¡ˆ"},
		{"id":"e6","fromNode":"center","toNode":"group-v6","fromSide":"bottom","toSide":"top"},
		{"id":"e7","fromNode":"node-v6-title","toNode":"node-v6-features","fromSide":"bottom","toSide":"top"},
		{"id":"e8","fromNode":"node-v6-title","toNode":"node-v6-code","fromSide":"bottom","toSide":"top"}
	]
}