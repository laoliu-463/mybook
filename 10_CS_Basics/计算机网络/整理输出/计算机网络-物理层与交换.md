---
tags: [java, 八股, 计算机网络-物理层与交换]
aliases: ["物理层与传输介质", "Circuit vs Packet Switching"]
date: 2026-01-20
status: draft
---

# Java 八股｜计算机网络-物理层与交换

`mermaid
mindmap
  root((物理层与交换))
    底层原理
      比特到信号的映射
      电路交换与分组交换
      存储转发
    核心特性
      介质差异(带宽/距离/抗干扰)
      统计复用
      时延组成
    高频面试题
      电路交换vs分组交换
      传播/传输/排队/处理时延
      无线介质特点
    追问链路
      为什么互联网选分组交换
      统计复用的代价
      时延与带宽关系
`

## 核心概念

- 物理层只处理比特与信号的转换，不理解内容语义。
- 有线介质(双绞线/同轴/光纤)在距离、带宽、抗干扰上各有取舍。
- 无线介质(无线电/微波/卫星/红外)强调传播方式与覆盖范围。
- 电路交换先独占一条路径，分组交换共享路径并按包转发。
- 存储转发要求路由器完整接收分组后再转发。
- 时延由处理、排队、传输、传播四部分组成。

## 源码/机制复盘（文字流程）

1) 物理层将比特流映射为电/光/无线信号，并在介质中传播。
2) 电路交换建立连接：选择路径并预留带宽，建立后独占使用。
3) 通信阶段保持固定带宽，空闲时资源仍被占用。
4) 通信结束释放连接，路径资源回收。
5) 分组交换把数据拆成分组，头部写入源/目的与序号。
6) 路由器执行存储转发：接收完整分组 -> 查路由表 -> 转发。
7) 多用户共享链路，依靠统计复用提高链路利用率。
8) 端到端时延由四类时延叠加，排队时延最不可控。

## 对比表

| 维度 | 电路交换 | 分组交换 |
| --- | --- | --- |
| 连接方式 | 先建立专用通路 | 无需预留，按包转发 |
| 资源占用 | 独占带宽 | 统计复用 |
| 时延 | 建链慢但稳定 | 受拥塞影响大 |
| 效率 | 低(空闲也占用) | 高(共享带宽) |
| 典型场景 | 传统电话网 | 互联网 |

## 可运行 Java 示例

`java
public class NetworkDelayDemo {
    static double transmissionDelay(double bits, double bandwidthBps) {
        // 用比特与 bps 保持单位一致，避免常见单位混淆
        return bits / bandwidthBps;
    }

    static double propagationDelay(double distanceMeters, double signalSpeed) {
        // 传播时延只与距离和介质光速相关
        return distanceMeters / signalSpeed;
    }

    static double storeAndForwardDelay(int hops, double bits, double bandwidthBps,
                                       double propPerHop, double procPerHop, double queuePerHop) {
        // 存储转发：每一跳都要等包完整到达再转发
        return hops * (transmissionDelay(bits, bandwidthBps) + propPerHop + procPerHop + queuePerHop);
    }

    public static void main(String[] args) {
        int hops = 3;
        double packetBits = 1_000_000; // 1 Mb
        double bandwidth = 100_000_000; // 100 Mb/s
        double propPerHop = propagationDelay(100_000, 2.0e8); // 100km, 光纤近似 2e8 m/s
        double procPerHop = 0.0002; // 0.2 ms
        double queuePerHop = 0.001; // 1 ms

        double total = storeAndForwardDelay(hops, packetBits, bandwidth, propPerHop, procPerHop, queuePerHop);
        System.out.printf("Total delay: %.3f ms%n", total * 1000);
    }
}
`

## 面试专栏

### ✅ 面试怎么问
- 电路交换和分组交换的核心区别是什么？
- 存储转发为什么会引入时延？
- 四类时延分别由什么因素决定？
- 无线电波和微波在传播特性上有什么差别？

### ⚠️ 坑点/误区
- 把传输时延和传播时延混为一谈。
- 认为提高带宽能显著降低传播时延。
- 误以为分组交换不需要任何时延控制或队列管理。

### 追问链路
- 为什么互联网选择分组交换而非电路交换？
- 统计复用带来的收益和代价分别是什么？
- 存储转发对时延与可靠性有什么影响？
- 拥塞出现时哪些时延项会急剧上升？
- 如何通过排队策略改善时延抖动？

## 一分钟背诵版

1. 物理层只负责比特到信号的转换，不关心内容含义。
2. 有线介质强调稳定与高带宽，光纤距离远、抗干扰强。
3. 无线介质覆盖广但易受干扰，微波直线传播、穿墙弱。
4. 电路交换先建专用通路，建链慢但时延稳定。
5. 分组交换拆包转发，效率高但时延受拥塞影响。
6. 存储转发要求完整收包再转发。
7. 时延由处理、排队、传输、传播四部分组成。
8. 排队时延最不稳定，取决于拥塞程度。
9. 传播时延只与距离和介质传播速率有关。
10. 统计复用提升链路利用率，是互联网扩展的关键。

## 面试 Checklist

- [ ] 说清物理层的职责与信号类型
- [ ] 分清有线/无线介质的差异与场景
- [ ] 能解释电路交换三阶段流程
- [ ] 能解释分组交换存储转发流程
- [ ] 能列出四类时延及影响因素
- [ ] 能回答“带宽提升是否降低时延”
- [ ] 能进行电路交换与分组交换对比
- [ ] 能关联统计复用与拥塞问题

[[物理层]] [[电路交换]] [[分组交换]] [[路由器]] [[时延]] [[带宽]]
