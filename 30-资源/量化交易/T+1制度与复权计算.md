---
title: T+1制度与复权计算
type: concept
tags: [量化交易, A股, T+1, 复权, 交易制度, notebooklm]
source: notebooklm
created: 2026-02-07
status: draft
next_review: 2026-02-08
interval: 1
ease: 2.5
reps: 0
---

# T+1制度与复权计算

## 核心定义

A股市场实行独特的非对称交易与交收制度：股票T+1交易（当日买入次日方可卖出），资金T+0可用、T+1可取。复权计算用于消除分红送配导致的价格断裂，保证技术指标连续性。^[1,4,5]

## 关键要点

### 1. T+1制度规则

| 制度 | 规则 | 说明 |
|------|------|------|
| **股票T+1** | 当日买入，次日卖出 | 日内买入头寸收盘前"冻结"^[1,2] |
| **资金T+0可用** | 卖出资金立即可用 | 可立即买入其他证券^[1,3] |
| **资金T+1可取** | 次日方可提现 | 结算完成后才能转至银行^[1,3] |

### 2. T+1对量化策略的影响

| 影响 | 说明 |
|------|------|
| **状态机管理** | 账户模块必须维护两套状态：可用余额 vs 总余额^[1] |
| **限制日内高频** | 纯日内回转交易（Day Trading）无法直接实施 |
| **变通T+0策略** | 需借助底仓（昨仓先卖再买）或融券实现日内套利^[1] |

### 3. 复权类型对比

| 类型 | 基准 | 用途 | 特点 |
|------|------|------|------|
| **后复权** | 上市首日价格 | 计算真实收益率 | 历史因子无需修改，适合增量更新^[6] |
| **前复权** | 当前最新价格 | K线视觉连续性 | 每次除权需重算全部历史因子^[4,5] |

## 复权计算公式

### 后复权因子

$$F_{post,t} = F_{post,t-1} \times \frac{P_{close,t-1}}{P_{adj\_pre\_close,t}}$$

- $P_{close,t-1}$：前一交易日收盘价
- $P_{adj\_pre\_close,t}$：交易所调整后的当日昨收价
- 若当日无除权：$F_{post,t} = F_{post,t-1}$

**后复权价格**：$P_{post} = P_{raw} \times F_{post,t}$ ^[15]

### 前复权因子

$$F_{pre,t} = \frac{F_{post,t}}{F_{post,latest}}$$

- 最新一天前复权因子恒为 1
- 每次新除权，历史前复权因子都需重算（变小）

**前复权价格**：$P_{pre} = P_{raw} \times F_{pre,t}$ ^[5]

## 复权因子维护

### 触发更新条件

除权除息日当天：
```
交易所公布昨收价 < 前一日实际收盘价
→ 触发复权因子跳变
```
^[5]

### 维护策略对比

| 类型 | 维护方式 | 优劣 |
|------|----------|------|
| **后复权** | 除权日当天乘以调整比率 | ✅ 增量更新，历史不变 |
| **前复权** | 动态计算或每日全量刷新 | ⚠️ 计算量大，但视觉友好 |

^[6,7]

## 分红送配对价格的影响

> [!example] 10送10拆股示例
> - 除权前：10元
> - 除权后（不复权）：5元
> - K线形成巨大向下缺口
> - 均线(MA)、RSI等指标**失真**

**本质**：除权导致的价格下跌并非市值缩水，而是股份数量增加后的名义价格调整。复权计算旨在还原这一"失真"。^[8]

## 系统实现边界情况

> [!warning] 停牌处理
> 停牌期间无收盘价，因子链计算需用上一交易日收盘价填充（Forward Fill），否则因子计算中断^[7,9]

> [!warning] 数据一致性校验
> 定期与第三方数据（Wind、同花顺）或标杆股票（贵州茅台）交叉验证，防止元数据错误导致因子漂移^[10]

> [!warning] 精度控制
> 复权因子需保留 **≥6位小数**，避免长周期（20年）回测中累积误差^[11]

> [!danger] 未来函数规避
> 回测历史策略时：
> - ❌ 禁止使用前复权价格（隐含未来除权信息）
> - ✅ 应使用后复权或动态复权数据^[12]

## 面试考点

**Q: 为什么回测不能用前复权数据？**

> 前复权以当前价格为基准向前调整，隐含了未来的除权除息信息。在历史某一天，系统不可能知道未来会发生什么除权事件，因此使用前复权会引入"未来函数"，导致回测结果失真。应使用后复权或动态复权。

**Q: T+1制度下如何实现日内套利？**

> 利用底仓（昨仓）先卖后买，或通过融券先卖后买，变相实现T+0交易。系统需维护"可用余额"状态机区分当日买入和历史持仓。

## 知识网络

- [[A股自动化交易系统-概览]]
- [[龙虎榜策略]]
- [[程序化交易监管法规]]

## 引用来源

本文内容来自 NotebookLM 笔记本，共 15 条引用标注。
